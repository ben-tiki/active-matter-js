var cos=Math.cos,sin=Math.sin,atan2=Math.atan2,PI=Math.PI,sqrt=Math.sqrt;function sum(b){for(let a=0;a<b.length;a++)return 0+b[a]}function rgb(a,b,c){return a=Math.floor(a),b=Math.floor(b),c=Math.floor(c),["rgb(",a,",",b,",",c,")"].join("")}var cls={1:rgb(160,0,14),2:rgb(195,0,16),3:rgb(209,0,31),4:rgb(222,10,38),5:rgb(240,30,44),6:rgb(254,44,44),7:rgb(265,68,74),8:rgb(238,107,107),9:rgb(246,150,152),10:rgb(255,203,209),11:rgb(240,240,240),12:rgb(255,255,255)};sir=!1,ps=!1,sm=!0,show_status=!1,fs=!1,fb=0,pe=!0;var v=1.5,ne=.5,box_size=c.width,ir=25,nb=10,bs=5,te=0;xp=[],yp=[],th=[],vx=[],vy=[];for(var i=0;i<nb;i++)xp.push(Math.random()*c.width),yp.push(Math.random()*c.height),th.push(2*Math.random()*PI),vx.push(v*cos(th[i])),vy.push(v*sin(th[i]));function main(){for(var a=0;a<nb;a++)xp[a]+=vx[a],yp[a]+=vy[a],xp[a]>c.width?xp[a]=xp[a]-c.width:xp[a]<0&&(xp[a]=xp[a]+c.width),yp[a]>c.height?yp[a]=yp[a]-c.height:yp[a]<0&&(yp[a]=yp[a]+c.height);for(var c=th,a=0;a<nb;a++){sx=0,sy=0,neighbor_count=0;for(var b=0;b<nb;b++){var d=(xp[b]-xp[a])**2+(yp[b]-yp[a])**2;!0==(neighbor=d<ir**2&&d>0)&&(sx+=cos(th[b]),sy+=sin(th[b]),neighbor_count+=1)}c[a]=atan2(sy,sx),th[a]=c[a]+(Math.random()-.5)*ne,vx[a]=v*cos(th[a]),vy[a]=v*sin(th[a]),ctx.beginPath(),ctx.moveTo(xp[a]+2.5*bs*cos(th[a]),yp[a]+2.5*bs*sin(th[a])),ctx.lineTo(xp[a]+bs*cos(th[a]+PI/2),yp[a]+bs*sin(th[a]+PI/2)),ctx.lineTo(xp[a]+bs*cos(th[a]-PI/2),yp[a]+bs*sin(th[a]-PI/2)),ctx.fillStyle=cls[neighbor_count],ctx.fill(),ctx.closePath(),sir&&(ctx.beginPath(),ctx.setLineDash([5,5]),ctx.arc(xp[a],yp[a],ir,0,2*Math.PI),ctx.strokeStyle="white",ctx.stroke(),ctx.closePath())}showMenu(),showStatus(),showfs(neighbor_count),te+=1}setInterval(function(){if(!ps){ctx.clearRect(0,0,c.width,c.height);for(let a=0;a<1;a++)main()}},10)